﻿<?xml version="1.0" encoding="utf-8" ?>
<project name="article-core" default="build" basedir=".">
	<property name="src.tmp" location="tmp" />
	<property name="src.src" location="src" />
	
	<!-- set path variables for file based pips-->
	<property name="src.files" location="${src.src}/files" />
	
	<!-- tar & delete tmp folder -->
	<target name="build" depends="tar">
		<delete dir="${src.tmp}" />
	</target>
	
	<!-- create package -->
	<target name="tar">
		<tstamp>
		  <format property="now" pattern="yyyy-MM-dd" locale="de,DE"/>
		</tstamp>
		
		<!-- tar file based pips-->
		<tar destfile="${src.tmp}/files.tar" basedir="${src.files}" />
		
		<!--tar package-->
		<tar destfile="build/de.codequake.wcf.core.article.${now}.tar">
			
			<!-- tar tmp folder with file based pip tar files -->
			<tarfileset dir="${src.tmp}" includes="*.tar" />
						
			<!-- tar package.xml -->
			<tarfileset file="${src.src}/package.xml" />
		</tar>
	</target>

</project>
